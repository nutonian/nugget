define([
    'Nugget',
    '../../../dependencies/d3'
],
function (
    Nugget,
    d3
) {
    describe('Line Graph Tests', function () {
        var data = [{x:0, y:109999757.8664778},{x:1, y:106779721.6388779},{x:2, y:111665995.9376359},{x:3, y:105996663.4320102},{x:4, y:115071455.2300099},{x:5, y:108397157.883242},{x:6, y:116433834.0624117},{x:7, y:136997208.985154},{x:8, y:138579707.5398667},{x:9, y:140475988.7333912},{x:10, y:156560060.3824675},{x:11, y:139632779.227497},{x:12, y:147546223.9289148},{x:13, y:153771873.9646711},{x:14, y:140709363.8559364},{x:15, y:144721252.4631877},{x:16, y:149301233.5944469},{x:17, y:150974108.0415197},{x:18, y:153802149.4993924},{x:19, y:171151539.1469471},{x:20, y:173502084.4766503},{x:21, y:172188776.5859639},{x:22, y:179149509.1486047},{x:23, y:186879430.7857467},{x:24, y:192187316.7797057},{x:25, y:185803694.0846438},{x:26, y:184480795.955287},{x:27, y:204584522.0997752},{x:28, y:206339583.2021945},{x:29, y:243572891.9825011},{x:30, y:197881630.1022548},{x:31, y:247851984.4294895},{x:32, y:214121152.9482067},{x:33, y:231633052.7234426},{x:34, y:206021196.4689243},{x:35, y:222553611.533971},{x:36, y:225103953.4755973},{x:37, y:233568495.283652},{x:38, y:246121887.8550515},{x:39, y:241033320.182694},{x:40, y:244486081.1254737},{x:41, y:231584570.0926241},{x:42, y:234060917.3259035},{x:43, y:248991372.6070648},{x:44, y:243621615.2239356},{x:45, y:258972455.6010689},{x:46, y:250017846.0657753},{x:47, y:261595923.7670837},{x:48, y:252031474.3269976},{x:49, y:276434335.4621446},{x:50, y:280925200.0913997},{x:51, y:274802570.3085809},{x:52, y:262295266.1490588},{x:53, y:284722282.7329178},{x:54, y:302165695.6766742}];

        var graphPoints = 'M100,29.770428533635254L105.07407407407408,29.95509278540828L110.14814814814815,29.674872277451307L115.22222222222221,30L120.2962962962963,29.4795742908077L125.37037037037038,29.86233524085149L130.44444444444443,29.401443906571494L135.51851851851853,28.222165173155894L140.5925925925926,28.131411252739376L145.66666666666669,28.022662368254167L150.74074074074076,27.100264964435446L155.8148148148148,28.07101916969609L160.88888888888889,27.617194975977707L165.96296296296296,27.260163276831097L171.03703703703704,28.00927865473633L176.11111111111111,27.779202855742298L181.18518518518516,27.516547801898714L186.25925925925924,27.420610959502017L191.33333333333331,27.258427020288885L196.40740740740742,26.26346552559405L201.48148148148147,26.12866527370628L206.55555555555557,26.203981512977897L211.62962962962962,25.80479393258528L216.7037037037037,25.36149451155644L221.77777777777777,25.05709520475065L226.85185185185185,25.423186399154243L231.92592592592592,25.499052624240687L237,24.34613405938069L242.07407407407408,24.24548393547331L247.14814814814815,22.110209478615996L252.22222222222223,24.730534869790237L257.2962962962963,21.864809939872394L262.3703703703704,23.79922257280597L267.44444444444446,22.794941365843123L272.51851851851853,24.263742937459014L277.59259259259255,23.31563371066828L282.66666666666663,23.16937542252262L287.74074074074076,22.683946635669816L292.81481481481484,21.964028385514478L297.88888888888886,22.25585011526958L302.96296296296293,22.05783944986636L308.03703703703707,22.797721772059475L313.11111111111114,22.65570696954137L318.18518518518516,21.799467735493593L323.25925925925924,22.107415273741424L328.33333333333337,21.227067584472305L333.40740740740745,21.740601021015998L338.4814814814815,21.076615616952495L343.55555555555554,21.62512245806679L348.6296296296296,20.225654944621525L353.7037037037037,19.968110588608656L358.77777777777777,20.319234230646124L363.85185185185185,21.036509379453157L368.9259259259259,19.750353589818953L374,18.75';
        var svg = document.createElement('svg');
        svg.setAttribute('id', 'foo');

        beforeEach(function() {
            document.body.insertBefore(svg, document.body.firstChild);
        });

        afterEach(function() {
            svg.parentElement.removeChild(svg);
        });
        it('should render a line graph', function() {
            var dataseries = new Nugget.DataSeries(data);

            var chart = new Nugget.Chart();

            var line = new Nugget.LineGraph({
                dataSeries: dataseries,
                color: 'purple'
            });

            chart.add(line);

            chart.appendTo('#foo');

            var renderedHtml = document.querySelectorAll('.line_path');

            var path = renderedHtml[0];

            var points = path.getAttribute('d');

            expect(renderedHtml.length).toBe(1);

            expect(points).toBe(graphPoints);
        });
    });
});